(function(h,o){typeof exports=="object"&&typeof module!="undefined"?o(exports,require("vue"),require("@interactjs/auto-start"),require("@interactjs/actions/drag"),require("@interactjs/actions/resize"),require("@interactjs/modifiers"),require("@interactjs/dev-tools"),require("@interactjs/interact"),require("mitt"),require("resize-observer-polyfill")):typeof define=="function"&&define.amd?define(["exports","vue","@interactjs/auto-start","@interactjs/actions/drag","@interactjs/actions/resize","@interactjs/modifiers","@interactjs/dev-tools","@interactjs/interact","mitt","resize-observer-polyfill"],o):(h=typeof globalThis!="undefined"?globalThis:h||self,o(h.VueGridLayout={},h.vue,null,null,null,null,null,h.interact,h.mitt,h.ResizeObserver))})(this,function(h,o,g,pt,yt,bt,wt,Y,T,O){"use strict";var dt=Object.defineProperty,gt=Object.defineProperties;var ct=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var ft=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable;var E=(h,o,g)=>o in h?dt(h,o,{enumerable:!0,configurable:!0,writable:!0,value:g}):h[o]=g,G=(h,o)=>{for(var g in o||(o={}))ft.call(o,g)&&E(h,g,o[g]);if(Z)for(var g of Z(o))mt.call(o,g)&&E(h,g,o[g]);return h},P=(h,o)=>gt(h,ct(o));function w(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var v=w(Y),X=w(T),$=w(O);function F(t){let e=0,i;for(let s=0,r=t.length;s<r;s++)i=t[s].y+t[s].h,i>e&&(e=i);return e}function z(t){const e=Array(t.length);for(let i=0,s=t.length;i<s;i++)e[i]=_(t[i]);return e}function _(t){return JSON.parse(JSON.stringify(t))}function R(t,e){return!(t===e||t.x+t.w<=e.x||t.x>=e.x+e.w||t.y+t.h<=e.y||t.y>=e.y+e.h)}function p(t,e){const i=C(t),s=M(t),r=Array(t.length);for(let n=0,a=s.length;n<a;n++){let l=s[n];l.static||(l=V(i,l,e),i.push(l)),r[t.indexOf(l)]=l,l.moved=!1}return r}function V(t,e,i){if(i)for(;e.y>0&&!y(t,e);)e.y--;let s;for(;s=y(t,e);)e.y=s.y+s.h;return e}function J(t,e){const i=C(t);for(let s=0,r=t.length;s<r;s++){const n=t[s];if(n.x+n.w>e.cols&&(n.x=e.cols-n.w),n.x<0&&(n.x=0,n.w=e.cols),!n.static)i.push(n);else for(;y(i,n);)n.y++}return t}function W(t,e){return t.find(i=>i.i===e)||{x:0,y:0,w:0,h:0,i:""}}function y(t,e){for(let i=0,s=t.length;i<s;i++)if(R(t[i],e))return t[i]}function B(t,e){return t.filter(i=>R(i,e))}function C(t){return t.filter(e=>e.static)}function I(t,e,i,s,r,n){if(e.static)return t;const a=e.x,l=e.y,f=s&&e.y>s;typeof i=="number"&&(e.x=i),typeof s=="number"&&(e.y=s),e.moved=!0;let u=M(t);f&&(u=u.reverse());const d=B(u,e);if(n&&d.length)return e.x=a,e.y=l,e.moved=!1,t;for(let c=0,b=d.length;c<b;c++){const m=d[c];m.moved||e.y>m.y&&e.y-m.y>m.h/4||(m.static?t=S(t,m,e,r):t=S(t,e,m,r))}return t}function S(t,e,i,s){if(s){const n={x:i.x,y:i.y,w:i.w,h:i.h,i:"-1"};if(n.y=Math.max(e.y-i.h,0),!y(t,n))return I(t,i,void 0,n.y,!1)}return I(t,i,void 0,i.y+1,!1)}function q(t,e,i,s){return{transform:"translate3d("+e+"px,"+t+"px, 0)",width:i+"px",height:s+"px",position:"absolute"}}function U(t,e,i,s){return{transform:"translate3d("+e*-1+"px,"+t+"px, 0)",width:i+"px",height:s+"px",position:"absolute"}}function Q(t,e,i,s){return{top:t+"px",left:e+"px",width:i+"px",height:s+"px",position:"absolute"}}function K(t,e,i,s){return{top:t+"px",right:e+"px",width:i+"px",height:s+"px",position:"absolute"}}function M(t){return[].concat(t).sort(function(e,i){return e.y===i.y&&e.x===i.x?0:e.y>i.y||e.y===i.y&&e.x>i.x?1:-1})}function tt(t,e="Layout"){const i=["x","y","w","h"];let s=[];if(!Array.isArray(t))throw new Error(e+" must be an array!");for(let r=0,n=t.length;r<n;r++){const a=t[r];for(let l=0;l<i.length;l++)if(typeof a[i[l]]!="number")throw new Error("VueGridLayout: "+e+"["+r+"]."+i[l]+" must be a number!");if(a.i===void 0||a.i===null)throw new Error("VueGridLayout: "+e+"["+r+"].i cannot be null!");if(typeof a.i!="number"&&typeof a.i!="string")throw new Error("VueGridLayout: "+e+"["+r+"].i must be a string or number!");if(s.indexOf(a.i)>=0)throw new Error("VueGridLayout: "+e+"["+r+"].i must be unique!");if(s.push(a.i),a.static!==void 0&&typeof a.static!="boolean")throw new Error("VueGridLayout: "+e+"["+r+"].static must be a boolean!")}}function D(t){return et(t)}function et(t){const e=t.target.offsetParent||document.body,i=e===document.body?{left:0,top:0}:e.getBoundingClientRect(),s=t.clientX+e.scrollLeft-i.left,r=t.clientY+e.scrollTop-i.top;return{x:s,y:r}}function k(t,e,i,s){return it(t)?{deltaX:i-t,deltaY:s-e,lastX:t,lastY:e,x:i,y:s}:{deltaX:0,deltaY:0,lastX:i,lastY:s,x:i,y:s}}function it(t){return typeof t=="number"&&!isNaN(t)}function st(t,e){const i=j(t);let s=i[0];for(let r=1,n=i.length;r<n;r++){const a=i[r];e>t[a]&&(s=a)}return s}function x(t,e){if(!e[t])throw new Error("ResponsiveGridLayout: `cols` entry for breakpoint "+t+" is missing!");return e[t]}function rt(t,e,i,s,r,n,a){if(e[s])return z(e[s]);let l=t;const f=j(i),u=f.slice(f.indexOf(s));for(let d=0,c=u.length;d<c;d++){const b=u[d];if(e[b]){l=e[b];break}}return l=z(l||[]),p(J(l,{cols:n}),a)}function j(t){return Object.keys(t).sort(function(i,s){return t[i]-t[s]})}let nt="auto";function N(){return typeof document=="undefined"?nt:document.documentElement.dir}var vt=(()=>`.vue-grid-item[data-v-5f50ad7e]{touch-action:none;transition:all .2s ease;transition-property:left,top,right}.vue-grid-item.no-touch[data-v-5f50ad7e]{touch-action:none}.vue-grid-item.cssTransforms[data-v-5f50ad7e]{transition-property:transform;left:0;right:auto}.vue-grid-item.cssTransforms.render-rtl[data-v-5f50ad7e]{left:auto;right:0}.vue-grid-item.resizing[data-v-5f50ad7e]{opacity:.6;z-index:3}.vue-grid-item.vue-draggable-dragging[data-v-5f50ad7e]{transition:none;z-index:3}.vue-grid-item.vue-grid-placeholder[data-v-5f50ad7e]{background:red;opacity:.2;transition-duration:.1s;z-index:2;user-select:none}.vue-grid-item>.vue-resizable-handle[data-v-5f50ad7e]{position:absolute;width:20px;height:20px;bottom:0;right:0;background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pg08IS0tIEdlbmVyYXRvcjogQWRvYmUgRmlyZXdvcmtzIENTNiwgRXhwb3J0IFNWRyBFeHRlbnNpb24gYnkgQWFyb24gQmVhbGwgKGh0dHA6Ly9maXJld29ya3MuYWJlYWxsLmNvbSkgLiBWZXJzaW9uOiAwLjYuMSAgLS0+DTwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DTxzdmcgaWQ9IlVudGl0bGVkLVBhZ2UlMjAxIiB2aWV3Qm94PSIwIDAgNiA2IiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjojZmZmZmZmMDAiIHZlcnNpb249IjEuMSINCXhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiDQl4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjZweCIgaGVpZ2h0PSI2cHgiDT4NCTxnIG9wYWNpdHk9IjAuMzAyIj4NCQk8cGF0aCBkPSJNIDYgNiBMIDAgNiBMIDAgNC4yIEwgNCA0LjIgTCA0LjIgNC4yIEwgNC4yIDAgTCA2IDAgTCA2IDYgTCA2IDYgWiIgZmlsbD0iIzAwMDAwMCIvPg0JPC9nPg08L3N2Zz4=);background-position:bottom right;padding:0 3px 3px 0;background-repeat:no-repeat;background-origin:content-box;box-sizing:border-box;cursor:se-resize}.vue-grid-item>.vue-rtl-resizable-handle[data-v-5f50ad7e]{bottom:0;left:0;background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAuMDAwMDAwMDAwMDAwMDAyIiBoZWlnaHQ9IjEwLjAwMDAwMDAwMDAwMDAwMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KIDwhLS0gQ3JlYXRlZCB3aXRoIE1ldGhvZCBEcmF3IC0gaHR0cDovL2dpdGh1Yi5jb20vZHVvcGl4ZWwvTWV0aG9kLURyYXcvIC0tPgogPGc+CiAgPHRpdGxlPmJhY2tncm91bmQ8L3RpdGxlPgogIDxyZWN0IGZpbGw9Im5vbmUiIGlkPSJjYW52YXNfYmFja2dyb3VuZCIgaGVpZ2h0PSIxMiIgd2lkdGg9IjEyIiB5PSItMSIgeD0iLTEiLz4KICA8ZyBkaXNwbGF5PSJub25lIiBvdmVyZmxvdz0idmlzaWJsZSIgeT0iMCIgeD0iMCIgaGVpZ2h0PSIxMDAlIiB3aWR0aD0iMTAwJSIgaWQ9ImNhbnZhc0dyaWQiPgogICA8cmVjdCBmaWxsPSJ1cmwoI2dyaWRwYXR0ZXJuKSIgc3Ryb2tlLXdpZHRoPSIwIiB5PSIwIiB4PSIwIiBoZWlnaHQ9IjEwMCUiIHdpZHRoPSIxMDAlIi8+CiAgPC9nPgogPC9nPgogPGc+CiAgPHRpdGxlPkxheWVyIDE8L3RpdGxlPgogIDxsaW5lIGNhbnZhcz0iI2ZmZmZmZiIgY2FudmFzLW9wYWNpdHk9IjEiIHN0cm9rZS1saW5lY2FwPSJ1bmRlZmluZWQiIHN0cm9rZS1saW5lam9pbj0idW5kZWZpbmVkIiBpZD0ic3ZnXzEiIHkyPSItNzAuMTc4NDA3IiB4Mj0iMTI0LjQ2NDE3NSIgeTE9Ii0zOC4zOTI3MzciIHgxPSIxNDQuODIxMjg5IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlPSIjMDAwIiBmaWxsPSJub25lIi8+CiAgPGxpbmUgc3Ryb2tlPSIjNjY2NjY2IiBzdHJva2UtbGluZWNhcD0idW5kZWZpbmVkIiBzdHJva2UtbGluZWpvaW49InVuZGVmaW5lZCIgaWQ9InN2Z181IiB5Mj0iOS4xMDY5NTciIHgyPSIwLjk0NzI0NyIgeTE9Ii0wLjAxODEyOCIgeDE9IjAuOTQ3MjQ3IiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiLz4KICA8bGluZSBzdHJva2UtbGluZWNhcD0idW5kZWZpbmVkIiBzdHJva2UtbGluZWpvaW49InVuZGVmaW5lZCIgaWQ9InN2Z183IiB5Mj0iOSIgeDI9IjEwLjA3MzUyOSIgeTE9IjkiIHgxPSItMC42NTU2NCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2U9IiM2NjY2NjYiIGZpbGw9Im5vbmUiLz4KIDwvZz4KPC9zdmc+);background-position:bottom left;padding-left:3px;background-repeat:no-repeat;background-origin:content-box;cursor:sw-resize;right:auto}.vue-grid-item.disable-userselect[data-v-5f50ad7e]{user-select:none}
`)(),L=(t,e)=>{const i=t.__vccOpts||t;for(const[s,r]of e)i[s]=r;return i};const at=o.defineComponent({name:"GridItem",props:{isDraggable:{type:Boolean,required:!1,default:null},isResizable:{type:Boolean,required:!1,default:null},static:{type:Boolean,required:!1,default:!1},minH:{type:Number,required:!1,default:1},minW:{type:Number,required:!1,default:1},maxH:{type:Number,required:!1,default:1/0},maxW:{type:Number,required:!1,default:1/0},x:{type:Number,required:!0},y:{type:Number,required:!0},w:{type:Number,required:!0},h:{type:Number,required:!0},i:{required:!0},dragIgnoreFrom:{type:String,required:!1,default:"a, button"},dragAllowFrom:{type:String,required:!1,default:null},resizeIgnoreFrom:{type:String,required:!1,default:"a, button"},preserveAspectRatio:{type:Boolean,required:!1,default:!1}},inject:["eventBus","layout"],data(){return{cols:1,containerWidth:100,rowHeight:30,margin:[10,10],maxRows:1/0,draggable:null,resizable:null,useCssTransforms:!0,useStyleCursor:!0,isDragging:!1,dragging:null,isResizing:!1,resizing:null,lastX:NaN,lastY:NaN,lastW:NaN,lastH:NaN,style:{},rtl:!1,dragEventSet:!1,resizeEventSet:!1,previousW:null,previousH:null,previousX:null,previousY:null,innerX:this.x,innerY:this.y,innerW:this.w,innerH:this.h}},emits:["container-resized","resize","resized","move","moved"],created(){let t=this;t.updateWidthHandler=function(e){t.updateWidth(e)},t.compactHandler=function(e){t.compact(e)},t.setDraggableHandler=function(e){t.isDraggable===null&&(t.draggable=e)},t.setResizableHandler=function(e){t.isResizable===null&&(t.resizable=e)},t.setRowHeightHandler=function(e){t.rowHeight=e},t.setMaxRowsHandler=function(e){t.maxRows=e},t.directionchangeHandler=()=>{this.rtl=N()==="rtl",this.compact()},t.setColNum=e=>{t.cols=parseInt(e)},this.eventBus.on("updateWidth",t.updateWidthHandler),this.eventBus.on("compact",t.compactHandler),this.eventBus.on("setDraggable",t.setDraggableHandler),this.eventBus.on("setResizable",t.setResizableHandler),this.eventBus.on("setRowHeight",t.setRowHeightHandler),this.eventBus.on("setMaxRows",t.setMaxRowsHandler),this.eventBus.on("directionchange",t.directionchangeHandler),this.eventBus.on("setColNum",t.setColNum),this.rtl=N()==="rtl"},beforeUnmount(){let t=this;this.eventBus.off("updateWidth",t.updateWidthHandler),this.eventBus.off("compact",t.compactHandler),this.eventBus.off("setDraggable",t.setDraggableHandler),this.eventBus.off("setResizable",t.setResizableHandler),this.eventBus.off("setRowHeight",t.setRowHeightHandler),this.eventBus.off("setMaxRows",t.setMaxRowsHandler),this.eventBus.off("directionchange",t.directionchangeHandler),this.eventBus.off("setColNum",t.setColNum),this.interactObj&&this.interactObj.unset()},mounted(){this.layout.responsive&&this.layout.lastBreakpoint?this.cols=x(this.layout.lastBreakpoint,this.layout.cols):this.cols=this.layout.colNum,this.rowHeight=this.layout.rowHeight,this.containerWidth=this.layout.width!==null?this.layout.width:100,this.margin=this.layout.margin!==void 0?this.layout.margin:[10,10],this.maxRows=this.layout.maxRows,this.isDraggable===null?this.draggable=this.layout.isDraggable:this.draggable=this.isDraggable,this.isResizable===null?this.resizable=this.layout.isResizable:this.resizable=this.isResizable,this.useCssTransforms=this.layout.useCssTransforms,this.useStyleCursor=this.layout.useStyleCursor,this.createStyle()},watch:{isDraggable(){this.draggable=this.isDraggable},static(){this.tryMakeDraggable(),this.tryMakeResizable()},draggable(){this.tryMakeDraggable()},isResizable(){this.resizable=this.isResizable},resizable(){this.tryMakeResizable()},rowHeight(){this.createStyle(),this.emitContainerResized()},cols(){this.tryMakeResizable(),this.createStyle(),this.emitContainerResized()},containerWidth(){this.tryMakeResizable(),this.createStyle(),this.emitContainerResized()},x(t){this.innerX=t,this.createStyle()},y(t){this.innerY=t,this.createStyle()},h(t){this.innerH=t,this.createStyle()},w(t){this.innerW=t,this.createStyle()},renderRtl(){this.tryMakeResizable(),this.createStyle()},minH(){this.tryMakeResizable()},maxH(){this.tryMakeResizable()},minW(){this.tryMakeResizable()},maxW(){this.tryMakeResizable()},"$parent.margin"(t){!t||t[0]==this.margin[0]&&t[1]==this.margin[1]||(this.margin=t.map(e=>Number(e)),this.createStyle(),this.emitContainerResized())}},computed:{classObj(){return{"vue-resizable":this.resizableAndNotStatic,static:this.static,resizing:this.isResizing,"vue-draggable-dragging":this.isDragging,cssTransforms:this.useCssTransforms,"render-rtl":this.renderRtl,"disable-userselect":this.isDragging,"no-touch":this.isAndroid&&this.draggableOrResizableAndNotStatic}},resizableAndNotStatic(){return this.resizable&&!this.static},draggableOrResizableAndNotStatic(){return(this.draggable||this.resizable)&&!this.static},isAndroid(){return navigator.userAgent.toLowerCase().indexOf("android")!==-1},renderRtl(){return this.layout.isMirrored?!this.rtl:this.rtl},resizableHandleClass(){return this.renderRtl?"vue-resizable-handle vue-rtl-resizable-handle":"vue-resizable-handle"}},methods:{createStyle(){this.x+this.w>this.cols?(this.innerX=0,this.innerW=this.w>this.cols?this.cols:this.w):(this.innerX=this.x,this.innerW=this.w);let t=this.calcPosition(this.innerX,this.innerY,this.innerW,this.innerH);this.isDragging&&(t.top=this.dragging.top,this.renderRtl?t.right=this.dragging.left:t.left=this.dragging.left),this.isResizing&&(t.width=this.resizing.width,t.height=this.resizing.height);let e;this.useCssTransforms?this.renderRtl?e=U(t.top,t.right,t.width,t.height):e=q(t.top,t.left,t.width,t.height):this.renderRtl?e=K(t.top,t.right,t.width,t.height):e=Q(t.top,t.left,t.width,t.height),this.style=e},emitContainerResized(){let t={};for(let e of["width","height"]){let s=this.style[e].match(/^(\d+)px$/);if(!s)return;t[e]=s[1]}this.$emit("container-resized",this.i,this.h,this.w,t.height,t.width)},handleResize(t){if(this.static)return;const e=D(t);if(e==null)return;const{x:i,y:s}=e,r={width:0,height:0};let n;switch(t.type){case"resizestart":{this.previousW=this.innerW,this.previousH=this.innerH,n=this.calcPosition(this.innerX,this.innerY,this.innerW,this.innerH),r.width=n.width,r.height=n.height,this.resizing=r,this.isResizing=!0;break}case"resizemove":{const a=k(this.lastW,this.lastH,i,s);this.renderRtl?r.width=this.resizing.width-a.deltaX:r.width=this.resizing.width+a.deltaX,r.height=this.resizing.height+a.deltaY,this.resizing=r;break}case"resizeend":{n=this.calcPosition(this.innerX,this.innerY,this.innerW,this.innerH),r.width=n.width,r.height=n.height,this.resizing=null,this.isResizing=!1;break}}n=this.calcWH(r.height,r.width),n.w<this.minW&&(n.w=this.minW),n.w>this.maxW&&(n.w=this.maxW),n.h<this.minH&&(n.h=this.minH),n.h>this.maxH&&(n.h=this.maxH),n.h<1&&(n.h=1),n.w<1&&(n.w=1),this.lastW=i,this.lastH=s,(this.innerW!==n.w||this.innerH!==n.h)&&this.$emit("resize",this.i,n.h,n.w,r.height,r.width),t.type==="resizeend"&&(this.previousW!==this.innerW||this.previousH!==this.innerH)&&this.$emit("resized",this.i,n.h,n.w,r.height,r.width),this.eventBus.emit("resizeEvent",{eventType:t.type,i:this.i,x:this.innerX,y:this.innerY,h:n.h,w:n.w})},handleDrag(t){if(this.static||this.isResizing)return;const e=D(t);if(e===null)return;const{x:i,y:s}=e;let r={top:0,left:0};switch(t.type){case"dragstart":{this.previousX=this.innerX,this.previousY=this.innerY;let a=t.target.offsetParent.getBoundingClientRect(),l=t.target.getBoundingClientRect();this.renderRtl?r.left=(l.right-a.right)*-1:r.left=l.left-a.left,r.top=l.top-a.top,this.dragging=r,this.isDragging=!0;break}case"dragend":{if(!this.isDragging)return;let a=t.target.offsetParent.getBoundingClientRect(),l=t.target.getBoundingClientRect();this.renderRtl?r.left=(l.right-a.right)*-1:r.left=l.left-a.left,r.top=l.top-a.top,this.dragging=null,this.isDragging=!1;break}case"dragmove":{const a=k(this.lastX,this.lastY,i,s);this.renderRtl?r.left=this.dragging.left-a.deltaX:r.left=this.dragging.left+a.deltaX,r.top=this.dragging.top+a.deltaY,this.dragging=r;break}}let n;this.renderRtl?n=this.calcXY(r.top,r.left):n=this.calcXY(r.top,r.left),this.lastX=i,this.lastY=s,(this.innerX!==n.x||this.innerY!==n.y)&&this.$emit("move",this.i,n.x,n.y),t.type==="dragend"&&(this.previousX!==this.innerX||this.previousY!==this.innerY)&&this.$emit("moved",this.i,n.x,n.y),this.eventBus.emit("dragEvent",{eventType:t.type,i:this.i,x:n.x,y:n.y,h:this.innerH,w:this.innerW})},calcPosition(t,e,i,s){const r=this.calcColWidth();let n;return this.renderRtl?n={right:Math.round(r*t+(t+1)*this.margin[0]),top:Math.round(this.rowHeight*e+(e+1)*this.margin[1]),width:i===1/0?i:Math.round(r*i+Math.max(0,i-1)*this.margin[0]),height:s===1/0?s:Math.round(this.rowHeight*s+Math.max(0,s-1)*this.margin[1])}:n={left:Math.round(r*t+(t+1)*this.margin[0]),top:Math.round(this.rowHeight*e+(e+1)*this.margin[1]),width:i===1/0?i:Math.round(r*i+Math.max(0,i-1)*this.margin[0]),height:s===1/0?s:Math.round(this.rowHeight*s+Math.max(0,s-1)*this.margin[1])},n},calcXY(t,e){const i=this.calcColWidth();let s=Math.round((e-this.margin[0])/(i+this.margin[0])),r=Math.round((t-this.margin[1])/(this.rowHeight+this.margin[1]));return s=Math.max(Math.min(s,this.cols-this.innerW),0),r=Math.max(Math.min(r,this.maxRows-this.innerH),0),{x:s,y:r}},calcColWidth(){return(this.containerWidth-this.margin[0]*(this.cols+1))/this.cols},calcWH(t,e,i=!1){const s=this.calcColWidth();let r=Math.round((e+this.margin[0])/(s+this.margin[0])),n=0;return i?n=Math.ceil((t+this.margin[1])/(this.rowHeight+this.margin[1])):n=Math.round((t+this.margin[1])/(this.rowHeight+this.margin[1])),r=Math.max(Math.min(r,this.cols-this.innerX),0),n=Math.max(Math.min(n,this.maxRows-this.innerY),0),{w:r,h:n}},updateWidth(t,e){this.containerWidth=t,e!=null&&(this.cols=e)},compact(){this.createStyle()},tryMakeDraggable(){const t=this;if((this.interactObj===null||this.interactObj===void 0)&&(this.interactObj=v.default(this.$el),this.useStyleCursor||this.interactObj.styleCursor(!1)),this.draggable&&!this.static){const e={ignoreFrom:this.dragIgnoreFrom,allowFrom:this.dragAllowFrom};this.interactObj.draggable(e),this.dragEventSet||(this.dragEventSet=!0,this.interactObj.on("dragstart dragmove dragend",function(i){t.handleDrag(i)}))}else this.interactObj.draggable({enabled:!1})},tryMakeResizable(){const t=this;if((this.interactObj===null||this.interactObj===void 0)&&(this.interactObj=v.default(this.$el),this.useStyleCursor||this.interactObj.styleCursor(!1)),this.resizable&&!this.static){let e=this.calcPosition(0,0,this.maxW,this.maxH),i=this.calcPosition(0,0,this.minW,this.minH);const s={edges:{left:!1,right:"."+this.resizableHandleClass.trim().replace(" ","."),bottom:"."+this.resizableHandleClass.trim().replace(" ","."),top:!1},ignoreFrom:this.resizeIgnoreFrom,restrictSize:{min:{height:i.height,width:i.width},max:{height:e.height,width:e.width}},modifiers:[]};this.preserveAspectRatio&&(s.modifiers=[v.default.modifiers.aspectRatio({ratio:"preserve"})]),this.interactObj.resizable(s),this.resizeEventSet||(this.resizeEventSet=!0,this.interactObj.on("resizestart resizemove resizeend",function(r){t.handleResize(r)}))}else this.interactObj.resizable({enabled:!1})},autoSize(){this.previousW=this.innerW,this.previousH=this.innerH;let t=this.$el.firstElementChild.getBoundingClientRect(),e=this.calcWH(t.height,t.width,!0);e.w<this.minW&&(e.w=this.minW),e.w>this.maxW&&(e.w=this.maxW),e.h<this.minH&&(e.h=this.minH),e.h>this.maxH&&(e.h=this.maxH),e.h<1&&(e.h=1),e.w<1&&(e.w=1),(this.innerW!==e.w||this.innerH!==e.h)&&this.$emit("resize",this.i,e.h,e.w,t.height,t.width),(this.previousW!==e.w||this.previousH!==e.h)&&(this.$emit("resized",this.i,e.h,e.w,t.height,t.width),this.eventBus.emit("resizeEvent",{eventType:"resizeend",i:this.i,x:this.innerX,y:this.innerY,h:e.h,w:e.w}))}}});function ot(t,e,i,s,r,n){return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(["vue-grid-item",t.classObj]),style:o.normalizeStyle(t.style)},[o.renderSlot(t.$slots,"default",{},void 0,!0),t.resizableAndNotStatic?(o.openBlock(),o.createElementBlock("span",{key:0,ref:"handle",class:o.normalizeClass(t.resizableHandleClass)},null,2)):o.createCommentVNode("",!0)],6)}var H=L(at,[["render",ot],["__scopeId","data-v-5f50ad7e"]]),zt=(()=>`.vue-grid-layout[data-v-7d3b3fd8]{position:relative;transition:height .2s ease}
`)();const lt=o.defineComponent({name:"GridLayout",provide(){return{eventBus:this.eventBus,layout:this}},components:{GridItem:H},props:{autoSize:{type:Boolean,default:!0},colNum:{type:Number,default:12},rowHeight:{type:Number,default:150},maxRows:{type:Number,default:1/0},margin:{type:Array,default(){return[10,10]}},isDraggable:{type:Boolean,default:!0},isResizable:{type:Boolean,default:!0},isMirrored:{type:Boolean,default:!1},useCssTransforms:{type:Boolean,default:!0},verticalCompact:{type:Boolean,default:!0},layout:{type:Array,required:!0},responsive:{type:Boolean,default:!1},responsiveLayouts:{type:Object,default(){return{}}},breakpoints:{type:Object,default(){return{lg:1200,md:996,sm:768,xs:480,xxs:0}}},cols:{type:Object,default(){return{lg:12,md:10,sm:6,xs:4,xxs:2}}},preventCollision:{type:Boolean,default:!1},useStyleCursor:{type:Boolean,default:!0}},data(){return{eventBus:X.default(),width:null,mergedStyle:{},lastLayoutLength:0,isDragging:!1,placeholder:{x:0,y:0,w:0,h:0,i:-1},layouts:{},lastBreakpoint:null,originalLayout:null}},emits:["update:layout","layout-created","layout-before-mount","layout-mounted","layout-updated","layout-ready","breakpoint-changed"],created(){const t=this;t.resizeEventHandler=function({eventType:e,i,x:s,y:r,h:n,w:a}){t.resizeEvent(e,i,s,r,n,a)},t.dragEventHandler=function({eventType:e,i,x:s,y:r,h:n,w:a}){t.dragEvent(e,i,s,r,n,a)},t.eventBus.on("resizeEvent",t.resizeEventHandler),t.eventBus.on("dragEvent",t.dragEventHandler),t.$emit("layout-created",t.layout)},beforeUnmount(){this.eventBus.off("resizeEvent",this.resizeEventHandler),this.eventBus.off("dragEvent",this.dragEventHandler),this.ro&&this.ro.unobserve(this.$el)},beforeMount(){this.$emit("layout-before-mount",this.layout)},mounted(){const t=this;this.$emit("layout-mounted",this.layout),this.$nextTick(function(){tt(this.layout),this.originalLayout=this.layout,this.$nextTick(function(){t.onWindowResize(),t.initResponsiveFeatures(),p(t.layout,t.verticalCompact),t.$emit("layout-updated",t.layout),t.updateHeight(),t.$nextTick(function(){t.ro=new $.default(()=>{t.onWindowResize()}),t.ro.observe(this.$el)})})})},watch:{width(t,e){const i=this;this.$nextTick(function(){this.eventBus.emit("updateWidth",this.width),e===null&&this.$nextTick(()=>{this.$emit("layout-ready",i.layout)}),this.updateHeight()})},layout(){this.layoutUpdate()},"layout.length"(){this.layoutUpdate()},colNum(t){this.eventBus.emit("setColNum",t)},rowHeight(){this.eventBus.emit("setRowHeight",this.rowHeight)},isDraggable(){this.eventBus.emit("setDraggable",this.isDraggable)},isResizable(){this.eventBus.emit("setResizable",this.isResizable)},responsive(){this.responsive||(this.$emit("update:layout",this.originalLayout),this.eventBus.emit("setColNum",this.colNum)),this.onWindowResize()},maxRows(){this.eventBus.emit("setMaxRows",this.maxRows)},margin(){this.updateHeight()}},methods:{layoutUpdate(){if(this.layout!==void 0&&this.originalLayout!==null){if(this.layout.length!==this.originalLayout.length){let t=this.findDifference(this.layout,this.originalLayout);t.length>0&&(this.layout.length>this.originalLayout.length?this.originalLayout=this.originalLayout.concat(t):this.originalLayout=this.originalLayout.filter(e=>!t.some(i=>e.i===i.i))),this.lastLayoutLength=this.layout.length,this.initResponsiveFeatures()}p(this.layout,this.verticalCompact),this.eventBus.emit("updateWidth",this.width),this.updateHeight(),this.$emit("layout-updated",this.layout)}},updateHeight(){this.mergedStyle={height:this.containerHeight()}},onWindowResize(){this.$el&&(this.width=this.$el.offsetWidth),this.eventBus.emit("resizeEvent",{})},containerHeight(){return this.autoSize?F(this.layout)*(this.rowHeight+this.margin[1])+this.margin[1]+"px":void 0},dragEvent(t,e,i,s,r,n){let a=W(this.layout,e);t==="dragmove"||t==="dragstart"?(this.placeholder.i=e,this.placeholder.x=a.x,this.placeholder.y=a.y,this.placeholder.w=n,this.placeholder.h=r,this.$nextTick(function(){this.isDragging=!0}),this.eventBus.emit("updateWidth",this.width)):this.$nextTick(function(){this.isDragging=!1}),this.$emit("update:layout",I(this.layout,a,i,s,!0,this.preventCollision)),p(this.layout,this.verticalCompact),this.eventBus.emit("compact"),this.updateHeight(),t==="dragend"&&this.$emit("layout-updated",this.layout)},resizeEvent(t,e,i,s,r,n){let a=W(this.layout,e),l;if(this.preventCollision){const f=B(this.layout,P(G({},a),{w:n,h:r})).filter(u=>u.i!==a.i);if(l=f.length>0,l){let u=1/0,d=1/0;f.forEach(c=>{c.x>a.x&&(u=Math.min(u,c.x)),c.y>a.y&&(d=Math.min(d,c.y))}),Number.isFinite(u)&&(a.w=u-a.x),Number.isFinite(d)&&(a.h=d-a.y)}}l||(a.w=n,a.h=r),t==="resizestart"||t==="resizemove"?(this.placeholder.i=e,this.placeholder.x=i,this.placeholder.y=s,this.placeholder.w=a.w,this.placeholder.h=a.h,this.$nextTick(function(){this.isDragging=!0}),this.eventBus.emit("updateWidth",this.width)):this.$nextTick(function(){this.isDragging=!1}),this.responsive&&this.responsiveGridLayout(),p(this.layout,this.verticalCompact),this.eventBus.emit("compact"),this.updateHeight(),t==="resizeend"&&this.$emit("layout-updated",this.layout)},responsiveGridLayout(){let t=st(this.breakpoints,this.width),e=x(t,this.cols);this.lastBreakpoint!=null&&!this.layouts[this.lastBreakpoint]&&(this.layouts[this.lastBreakpoint]=z(this.layout));let i=rt(this.originalLayout,this.layouts,this.breakpoints,t,this.lastBreakpoint,e,this.verticalCompact);this.layouts[t]=i,this.lastBreakpoint!==t&&this.$emit("breakpoint-changed",t,i),this.$emit("update:layout",i),this.lastBreakpoint=t,this.eventBus.emit("setColNum",x(t,this.cols))},initResponsiveFeatures(){this.layouts=Object.assign({},this.responsiveLayouts)},findDifference(t,e){let i=t.filter(function(r){return!e.some(function(n){return r.i===n.i})}),s=e.filter(function(r){return!t.some(function(n){return r.i===n.i})});return i.concat(s)}}});function ht(t,e,i,s,r,n){const a=o.resolveComponent("grid-item");return o.openBlock(),o.createElementBlock("div",{class:"vue-grid-layout",style:o.normalizeStyle(t.mergedStyle)},[o.renderSlot(t.$slots,"default",{},void 0,!0),o.withDirectives(o.createVNode(a,{class:"vue-grid-placeholder",x:t.placeholder.x,y:t.placeholder.y,w:t.placeholder.w,h:t.placeholder.h,i:t.placeholder.i},null,8,["x","y","w","h","i"]),[[o.vShow,t.isDragging]])],4)}var A=L(lt,[["render",ht],["__scopeId","data-v-7d3b3fd8"]]);const ut=t=>{t.component("grid-layout",A),t.component("grid-item",H)};h.GridItem=H,h.GridLayout=A,h.default=ut,Object.defineProperty(h,"__esModule",{value:!0}),h[Symbol.toStringTag]="Module"});
